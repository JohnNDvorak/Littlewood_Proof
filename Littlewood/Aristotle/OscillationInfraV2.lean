/-
This file was generated by Aristotle (https://aristotle.harmonic.fun).

Lean version: leanprover/lean4:v4.24.0
Mathlib version: f897ebcf72cd16f89ab4577d0c826cd14afaafc7
This project request had uuid: e38f1c33-b78f-4fb2-87d1-6388e132e020

To cite Aristotle, tag @Aristotle-Harmonic on GitHub PRs/issues, and add as co-author to commits:
Co-authored-by: Aristotle (Harmonic) <aristotle-harmonic@harmonic.fun>

Aristotle's budget for this request has been reached.
If there is partial progress, it will appear in this file.
If you would like to continue working off of this partial progress,
please submit the same prompt, and add this .lean file in "Optional: Attach a Lean file as context" field.
-/

import Mathlib

set_option linter.mathlibStandardSet false

open scoped BigOperators
open scoped Real
open scoped Nat
open scoped Classical
open scoped Pointwise

set_option maxHeartbeats 3200000
set_option maxRecDepth 4000
set_option synthInstance.maxHeartbeats 20000
set_option synthInstance.maxSize 128

set_option relaxedAutoImplicit false
set_option autoImplicit false

noncomputable section

namespace Aristotle.OscillationInfraV2

/-
Definitions for Omega Plus and Minus oscillation.
-/
def Littlewood.IsOmegaPlus (f g : ℝ → ℝ) : Prop :=
  ∀ C, ∃ x, f x > C * g x

def Littlewood.IsOmegaMinus (f g : ℝ → ℝ) : Prop :=
  ∀ C, ∃ x, f x < -C * g x

class Littlewood.IsOmegaPlusMinus (f g : ℝ → ℝ) : Prop where
  is_plus : Littlewood.IsOmegaPlus f g
  is_minus : Littlewood.IsOmegaMinus f g

/-
Redefining HardyCriticalLineZerosHyp to include linear independence of zeros, which is necessary for the phase alignment argument.
-/
def LinearIndependentOverQ (γ : ℕ → ℝ) := ∀ N (c : Fin N → ℤ), (∑ i, (c i : ℝ) * γ i) = 0 → ∀ i, c i = 0

class HardyCriticalLineZerosHyp where
  zeros : ℕ → ℝ
  sum_diverges : ¬ Summable (fun n ↦ 1 / (1/4 + (zeros n)^2))
  linear_independence : LinearIndependentOverQ zeros

/-
Class encapsulating the Dirichlet phase alignment theorem as a field.
-/
class DirichletInfrastructure where
  exists_large_x_phases_aligned : ∀ (γ : ℕ → ℝ) (N : ℕ) (shift : ℝ) (ε : ℝ) (X : ℝ), ε > 0 →
    LinearIndependentOverQ γ →
    ∃ x > X, ∀ k < N, ∃ m : ℤ, |γ k * Real.log x - shift - m * 2 * Real.pi| < ε

/-
Lemma stating that the partial sums of the reciprocals of the squared magnitudes of the zeros can be made arbitrarily large.
-/
lemma sum_diverges_to_infinity [HardyCriticalLineZerosHyp] (C : ℝ) :
  ∃ N, ∑ k ∈ Finset.range N, 1 / (1/4 + (HardyCriticalLineZerosHyp.zeros k)^2) > C := by
  have h_div := HardyCriticalLineZerosHyp.sum_diverges
  have h_nonneg : ∀ n, 0 ≤ 1 / (1/4 + (HardyCriticalLineZerosHyp.zeros n)^2) := by
    intro n
    apply div_nonneg
    norm_num
    nlinarith [sq_nonneg (HardyCriticalLineZerosHyp.zeros n)]
  have h_unbounded : Filter.Tendsto (fun N => ∑ k ∈ Finset.range N, 1 / (1 / 4 + (‹HardyCriticalLineZerosHyp›.zeros k) ^ 2)) Filter.atTop Filter.atTop := by
    exact not_summable_iff_tendsto_nat_atTop_of_nonneg h_nonneg |>.1 h_div;
  exact ( h_unbounded.eventually_gt_atTop C ) |> fun h => h.exists

end Aristotle.OscillationInfraV2
