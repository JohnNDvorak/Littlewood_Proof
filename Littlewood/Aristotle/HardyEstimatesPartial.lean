/-
This file was generated by Aristotle.

Lean version: leanprover/lean4:v4.24.0
Mathlib version: f897ebcf72cd16f89ab4577d0c826cd14afaafc7
This project request had uuid: 1de9e757-d492-4eb5-886c-23a29769fca0

To cite Aristotle, tag @Aristotle-Harmonic on GitHub PRs/issues, and add as co-author to commits:
Co-authored-by: Aristotle (Harmonic) <aristotle-harmonic@harmonic.fun>

Aristotle's budget for this request has been reached.
Partial progress: defines HardyEstimates structure and basic lemmas.
Budget exhausted before main theorem could be proved.

NOTE: Uses Complex.log.im for theta (vs Complex.arg in other Hardy files).
For z ∈ slitPlane, (Complex.log z).im = Complex.arg z, so equivalent.
-/

import Mathlib

set_option linter.mathlibStandardSet false

open scoped BigOperators
open scoped Real
open scoped Nat
open scoped Classical
open scoped Pointwise

set_option maxHeartbeats 0
set_option maxRecDepth 4000
set_option synthInstance.maxHeartbeats 20000
set_option synthInstance.maxSize 128

set_option relaxedAutoImplicit false
set_option autoImplicit false

noncomputable section

namespace HardyEstimatesPartial

/-
Hardy's theta function. This normalizes the phase of zeta on the critical line.
θ(t) = Im(log Γ(1/4 + it/2)) - (t/2) log π
-/
def hardyTheta (t : ℝ) : ℝ :=
  (Complex.log (Complex.Gamma (1/4 + Complex.I * (t/2)))).im - (t/2) * Real.log Real.pi

/-
Hardy's Z function. This is REAL-VALUED on the real line.
Z(t) = exp(iθ(t)) * ζ(1/2 + it)

Key property: Z(t) ∈ ℝ for all t, and Z(t) = 0 ↔ ζ(1/2+it) = 0.
-/
def hardyZ (t : ℝ) : ℝ :=
  (Complex.exp (Complex.I * hardyTheta t) * riemannZeta (1/2 + Complex.I * t)).re

/-
The set of zeros of zeta on the critical line.
-/
def zetaCriticalZeros : Set ℝ :=
  {t : ℝ | riemannZeta (1/2 + Complex.I * t) = 0}

/-
The set of sign changes of a real function.
-/
def signChanges (f : ℝ → ℝ) : Set ℝ :=
  {t : ℝ | ∃ ε > 0, ∃ t₁ t₂, t - ε < t₁ ∧ t₁ < t ∧ t < t₂ ∧ t₂ < t + ε ∧
    f t₁ * f t₂ < 0}

/-
The exponential factor has modulus 1.
-/
lemma exp_iTheta_norm (t : ℝ) :
    ‖Complex.exp (Complex.I * hardyTheta t)‖ = 1 := by
      norm_num [ Complex.norm_exp ]

/-
Structure capturing the key analytic estimates and properties required for Hardy's theorem.
-/
structure HardyEstimates where
  mean_square_lower : ∃ c > 0, ∃ T₀ > 0, ∀ T ≥ T₀,
    c * T * Real.log T ≤ ∫ t in Set.Ioc 1 T, (hardyZ t)^2
  first_moment_upper : ∀ ε > 0, ∃ C > 0, ∃ T₀ > 0, ∀ T ≥ T₀,
    |∫ t in Set.Ioc 1 T, hardyZ t| ≤ C * T^(1/2 + ε)
  hardyZ_continuous : Continuous hardyZ

end HardyEstimatesPartial
